FROM php:8-fpm-alpine
RUN apk add --no-cache composer && \
    docker-php-ext-install mysqli && \
    docker-php-ext-enable mysqli
COPY --chown=nobody:nobody ["./", "./resources/languages", "/guest-portal/"]
COPY ./resources/php.ini $PHP_INI_DIR/php.ini
RUN composer install --no-ansi --no-dev --no-interaction --no-plugins --no-progress --no-scripts --optimize-autoloader -d /guest-portal
USER 82
